<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>MSAN 622 - Information Visualization</title>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/business-casual.css" rel="stylesheet">
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">
  	
  <style>
    body {
      font: 14px sans-serif;
    }

    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .bar {
      fill: #377eb8;
      fill-opacity: .9;
    }

    .x.axis path {
      display: none;
    }
  </style>

<body>

<div class="brand">MSAN 622</div>
<div class="address-bar">Information Visualization</div>

<!-- Navigation -->
<nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">Information Visualization</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html#about">About</a></li>
                <li><a href="index.html#homework">Homework</a></li>
                <li><a href="index.html#project">Project</a></li>
                <li><a href="index.html#participation">Participation</a></li>                    
            </ul>
        </div>
    </div>
</nav>

<div class="container">
    <div class="row">
        <div class="box">
            <div class="col-lg-12 text-center">
                <h1 class="brand-name">Homework 1</h1>
                <hr class="tagline-divider">
                <h2>
                    <small>By <strong> Monica Meyer</strong></small>
                </h2>
                <p> <a href="https://github.com/monicameyer/MSAN622_repo_meyer/blob/gh-pages/homework1.html">See Code</a></p>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="box">
            <div class="col-lg-12 text-center" id="chart"> 
              <label><input type="checkbox"> Sort by value</label>	

              <h4> Search box </h4>
              <input type='text' id='link_id'>
              <input type='button' id='link' value='Search' onClick='d3.select("svg").remove() ;text_box()'>

				      <script src="http://d3js.org/d3.v3.min.js"></script>
				      <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
				      <script> 
                
              function text_box() {
                var qstring = (document.getElementById('link_id').value).toLowerCase();
                var st = qstring.replace(/\s/g, '');
                var str2 = (st.replace(/[^a-z]/g, '')).split('');
                var str = str2.sort();

                var data = {};

                for (var i = 0; i < str.length; i++){
                	if (str[i] in data){
                		data[str[i]] += 1
                	}
                	else{
                		data[str[i]] = 1
                	}
                }			

                var data2 = d3.entries(data)
                draw_chart(data2)
              }

              function load_data(){
                var qstring = decodeURI(window.location.search).toLowerCase();
                var st = qstring.replace(/\s/g, '');
                var str2 = (st.replace(/[^a-z]/g, '')).split('');
                var str = str2.sort();

                var data = {};

                for (var i = 0; i < str.length; i++){
                  if (str[i] in data){
                    data[str[i]] += 1
                  }
                  else{
                    data[str[i]] = 1
                  }
                }     

                var data2 = d3.entries(data)
                draw_chart(data2)
              };

              function draw_chart(data){
                var margin = {top: 40, right: 20, bottom: 30, left: 40},
                    width = 960 - margin.left - margin.right,
                    height = 500 - margin.top - margin.bottom;

                var x = d3.scale.ordinal()
                    .rangeRoundBands([0, width], .1);

                var y = d3.scale.linear()
                    .range([height, 0]);

                var xAxis = d3.svg.axis()
                    .scale(x)
                    .orient("bottom");

                var yAxis = d3.svg.axis()
                    .scale(y)
                    .orient("left")
                    .ticks(d3.max(data, function(d) {return d.value;}), '');

                var svg = d3.select("#chart").append("svg")
                    .attr("width", width + margin.left + margin.right + 20)
                    .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

              	x.domain(data.map(function(d) { return d.key; }));
              	y.domain([0, d3.max(data, function(d) { return d.value; })]);

              	svg.append("g")
                    .attr("class", "x axis")
                    .attr("transform", "translate(0," + height + ")")
                    .call(xAxis);

              	svg.append("g")
                    .attr("class", "y axis")
                    .call(yAxis)
              	 .append("text")
                    .attr("transform", "rotate(-90)")
                    .attr("y", 6)
                    .attr("dy", ".71em")
                    .style("text-anchor", "end")
                    .text("Frequency");

              	svg.selectAll(".bar")
                    .data(data)
                  .enter().append("rect")
                    .attr("class", "bar")
                    .attr("x", function(d) { return x(d.key); })
                    .attr("width", x.rangeBand())
                    .attr("y", function(d) { return y(d.value); })
                    .attr("height", function(d) { return height - y(d.value); })
              	    .on('mouseover', function() {
                        d3.select(this)
                          .transition()
                          .duration(200)
                          .style("fill", "#984ea3");})
                    .on('mouseout', function() {
                        d3.select(this)
                          .transition()
                          .duration(200)
                          .style("fill", "#377eb8");});
                    
              	d3.select("input").on("change", change);

              	var sortTimeout = setTimeout(function() {
              		d3.select("input").property("checked", true).each(change); }, 2000);
                      
                function change() {
                  clearTimeout(sortTimeout);

                  var x0 = x.domain(data.sort(this.checked
                        ? function(a, b) { return b.value - a.value; }
                        : function(a, b) { return d3.ascending(a.key, b.key); })
                        .map(function(d) { return d.key; }))
                        .copy();

                  svg.selectAll(".bar")
                        .sort(function(a, b) { return x0(a.key) - x0(b.key); });

                  var transition = svg.transition().duration(750),
                        delay = function(d, i) { return i * 50; };

                  transition.selectAll(".bar")
                        .delay(delay)
                        .attr("x", function(d) { return x0(d.key); });

                  transition.select(".x.axis")
                        .call(xAxis)
                      .selectAll("g")
                        .delay(delay);
                  } 

              };

              window.onload = load_data();
              </script>
            </div>
        </div>
        <div class="box">
            <div class="col-lg-12">
            	<h3>Functionality</h3>
              <p style="font-size:18px">C-Level</p>
            	<ul style="font-size:14px">
                <li >No decimals in tick marks of frequency counts on y-axis</li>
            		<li>Total number of tick marks on y-axis is always equal to the maximum frequency of letters.</li>
                <li>Sorted alphabetically or by value.</li>
                <li></li>
              </ul>
              <p style="font-size:18px">B-Level</p>
              <ul style="font-size:14px">
                <li>Added a button that allows user to change between sorting alphabetically (default) and sorting by value.</li>
                <li>Added a search box on the page, which allows user to show letter frequency for the text in that box instead of from the URL query.</li>
              </ul>
              <p style="font-size:18px">A-Level</p>
              <ul style="font-size:14px">
                <li></li>
              </ul>              
            </div>
        </div>
    </div>
</div>



<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <p style="text-align: center;">Monica Meyer &bullet; MSAN 622 Information Visualization &bullet; Spring 2015</p>
            </div>
        </div>
    </div></footer>

<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/d3.min.js"></script>


</body>

</html>
