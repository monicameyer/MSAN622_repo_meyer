<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>MSAN 622 - Information Visualization</title>
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/business-casual.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">
    <style>
      .dot {
        stroke: #000;
        fill-opacity:  .8;
      }

      .axis path, .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
      }

      svg {
        font: 10px sans-serif;
      }

      .background path {
        fill: none;
        stroke: #ccc;
        stroke-opacity: .4;
      }

      .foreground path {
        fill: none;
        stroke-width: 2px;
      }

      .brush .extent {
        fill-opacity: .3;
        stroke: #fff;
        shape-rendering: crispEdges;
      }

/*      .xaxis2 path {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
      }*/

      .d3-tip {
        line-height: 1;
        font-family: "Georgia";
        line-height: 1.3;
        padding: 10px;
        background: rgba(0, 0, 0, .5);
        color: #F0F8FF;
        border-radius: 2px;
      }

      .d3-tip:after {
        box-sizing: border-box;
        display: inline;
        font-size: 12px;
        width: 100%;
        line-height: 1;
        color: rgba(0, 0, 0, .5);
        content: "\25BC";
        position: absolute;
        text-align: center;
      }

      .d3-tip.n:after {
        margin: -.2px 0 0 0;
        top: 100%;
        left: 0;
      }
    </style>
</head>

<body>
  <div class="brand">MSAN 622</div>
  <div class="address-bar">Information Visualization</div>

  <!-- Navigation -->
  <nav class="navbar navbar-default" role="navigation">
      <div class="container">
          <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">Information Visualization</a>
          </div>
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                  <li><a href="../index.html">Home</a></li>
                  <li><a href="../index.html#about">About</a></li>
                  <li><a href="../index.html#homework">Homework</a></li>
                  <li><a href="../index.html#project">Project</a></li>
                  <li><a href="../index.html#participation">Participation</a></li>                    
              </ul>
          </div>
      </div>
  </nav>

  <div class="container">
      <div class="row">
          <div class="box">
              <div class="col-lg-12 text-center">
                  <h1 class="brand-name">Final Project</h1>
                  <hr class="tagline-divider">
                  <h2><small>By <strong> Monica Meyer</strong></small></h2>
                  <p><a href="https://github.com/monicameyer/MSAN622_repo_meyer/blob/gh-pages/Project/project_report.html">See Code</a></p>
              </div>
          </div>
      </div>

      <div class="row">
          <div class="box text-center">
              <hr>
              <h3 class= "text-center">Visualization</h3>
              <hr>
            <div class="text-left" id="drop_down">
              Select a metric to view on the map: 
            </div>
            <div class="col-lg-12" id="chart1"></div>

            <script src="../js/d3.min.js"></script>
            <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
            <script src="../js/colorbrewer.js"></script>
            <script src="http://d3js.org/topojson.v1.min.js"></script>
            <script src="../js/project_final.js"></script>


            <div class="col-lg-12 text-center" id="chart2"><p>Category Scores for Each Neighborhood</p>
            </div>
            
          </div>
      </div>

      <div class="row">
          <div class="box">
            <div class="col-lg-12">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                  <hr>
                  <h3 class= "text-center">Discussion</h3>
                  <hr>

                  <h4 class= "text-center">Techniques</h4>
                  
                  <p style="font-size:14px">The map encodes 6 columns of the data which are used to color each neighborhood in the map. The columns are chosen via a drop down menu, allowing the user to choose between crime, overcrowding, poverty, education, employment and community score to visualize on the map. Whichever column is chosen is then shown on the map via shading of neighborhoods by the metric's density. There is also a tooltip to show details on demand so that the user can see the value for each neighborhood. One issue that came up that affects the lie factor is the fact that the data had separate rows for Mission Bay and South of Market, while the map does not have separate neighborhood boundaries for these. In this case, this increases the lie factor because the values being displayed for South of Market in the map only includes a portion of the overall land area being displayed. I tried finding a better shape file to use in the creation of this topojson, but was unable to. The data ink ratio is very high, and the data density ratio is also high, since very little of the area is not dedicated to displaying data. The map identifies clusters of neighborhoods with similar values as well as providing overall context for the other visualizations in terms of locations that are close together or often have similar trends to the data. </p>

                  <p style="font-size:14px">The bubble chart encodes 4 columns of the data, percent area in high heat vulnerability zones on the y-axis, percent impervious surface on the x-axis, percent area within .25 miles of a contamination risk as the bubble size and overall environmental resiliency score as the color. There is a tooltip implemented that allows the user to view all values for the neighborhood that is hovered over. The life factor is affected by the fact that bubble size starts at radius of 5 pixels, which is encoded as 0%. The data ink ratio is high, although the legend does affect the amount of ink being used strictly to display the data. The data density ratio is quite low, since the bubbles do not cover very much of the area being displayed in the chart. The bubble chart allows the user to see the pattern in the data between the x and y axis. It also allows the user to see that Treasure Island is an outlier in terms of proximity to contaminated areas, since the circle is larger than neighborhoods near it on the x and y axis.</p>

                  <p style="font-size:14px">For the bar chart, there are 5 columns of the data being encoded as bar size, percent people living alone, residential violation rate, percent households paying rent over 50% of their monthly income, preventable hospitalization rate and average active minutes per resident per day. Resiliency score is also encoded as the color scale for all the bars. The data ink ratio is very high and the data density ratio is not high, but not very low either. There is nothing affecting the lie factor, since every bar starts at zero. This visualization is very good at showing an overview of multiple columns of the data. It also allows the user to see trends between neighborhoods with similar overall resiliency scores (encoded as color) because the interactivity allows the user to focus on neighborhoods with the same score while fading the other neighborhoods. I chose to do small multiples bar charts since a single bar chart only allows us to see one metric, but bar charts are simple enough that we can show multiple bar charts without losing the detail of each individual column of the data being displayed.</p>

                  <p style="font-size:14px">The parallel coordinates chart encodes resiliency score as color and then encodes 8 category scores, the overall resiliency rank and the district the neighborhood belongs to as the axes. I chose to use the same color here as was encoded as color for the small multiples bar chart for consistency (both colors represent the neighborhood's overall resiliency score). This chart has low lie factor, low data density and high data ink ratio. This visualization is the best overview of the data. It allows the user insight into the overall trends across the main categories of the data, without bogging us down in the over 50 columns of data in the dataset. It allows the user to brush to see patterns and trends in the data, such as the fact that neighborhoods that score high in transportation score low in housing.</p>
                  
                  <h4 class= "text-center">Interactivity</h4>
                  
                  <p style="font-size:14px">There is interactivity on each chart as well as inter-chart interactivity between the map and bubble chart. The map chart allows a user to filter the data to show a metric of their choice on the map. I implemented a tooltip on the map for the user to see what the value is for whichever metric is currently chosen. This interactivity provides context for the shading of the neighborhoods. For both the map and the bubble chart, when a neighborhood is clicked on, it fades all other neighborhoods on the map and bubble chart, allowing the user to view both charts within the context of the neighborhood they are interested in. </p>

                  <p style="font-size:14px">In the small multiples bar chart, on mouseover, the graphic fades neighborhoods which do not have the same resiliency score, to highlight how different columns in the data affect the overall resiliency of a neighborhood. There is also a tooltip to provide details on demand for all the columns that are shown in the small multiples. This gives the user a better overall view of the bar charts.</p>

                  <p style="font-size:14px">The parallel coordinates chart allows for brushing and panning across each of the x-axis. This provides focus + context, since when an axis is brushed, the lines that are not brushed are faded into the background, allowing the user to view specific aspects of the data without losing the overall context from all of the data being shown.</p>
                  
                  <h4 class= "text-center">Feedback</h4>

                  <p style="font-size:14px">In class, I demonstrated a prototype which did not contain any data on the map, but which had implemented a bubble chart, small multiples bar chart and a parallel coordinates chart. The feedback that I found particularly helpful was in regards to color. The colors of the small multiples bar chart were originally too difficult to compare, since the range was a multi-hue color scale from colorbrewer. It was also suggested that I use the same color scale (and by design, the same data column for the color) for both the small multiples and parallel coordinates chart, to tie them together in some way. These comments were very useful because they allowed me to find a way to connect the last two charts without adding interactivity between the charts, which did not make sense for the visualizations. </p>

                  <p style="font-size:14px">Another suggestion was to change the interactivity I had implemented in the parallel coordinates chart. Originally, I had a hover implemented which highlighted the line (neighborhood) that was hovered over, but I changed this to allow the user to brush the axes instead. This allows the user to still view one neighborhood at a time by brushing on the ordinal axis of neighborhood, but also allows them to brush other axes to see more than one neighborhood at a time. There were not any particular pieces of feedback that I did not agree with, because all of these changes enhanced my visualizations.</p>
                  
                  <h4 class= "text-center">Challenges</h4>

                  <p style="font-size:14px">The biggest challenges I encountered were in my implementation of the map visualization. The other three visualizations were methods I had used previously, so the challenges I encountered there were when trying to make smaller changes. With the map, I started with a shapefile of the San Francisco neighborhoods. I translated that to a geojson format and then to topojson, but realized quickly that that was not the correct way to go about this. I needed an id feature that could then be used to map my rows of data to the neighborhood being referenced. The topojson allowed for a field to be the id, but some of the neighborhoods have more than one word and javascript does not allow for attributes such as id's to have spaces in them. I thus created an id field without spaces that could still be mapped to an string with spaces for the tooltips to show the neighborhood correctly. I also combined my data into the topojson, so that I would not have to reference multiple d3.json calls in my code. Instead, the topojson had two objects, one which was the map boundaries and one which contained all the data needed to shade in the neighborhoods. The next challenging aspect of implementing the map was to shade in neighborhoods correctly based on the data. I wanted to implement a drop down that allowed a user to select which metric to view on the map, and since each of these metrics had different domains, I had to create different maps from the id to the value to determine what color a given neighborhood would be shaded. I am sure there is a more efficient way of doing this, but I created 6 color scales and 6 map objects that could be used to map id to value to color. Then, I added some if/then statements to tell which map and which color scale to use depending on which metric was chosen from the drop down menu.</p>

                  <p style="font-size:14px">One challenge with the bubble chart was in creating the bubble size legend. I had already created a color legend in a previous homework, so I knew how to do that, but was unsure of how to create a legend to explain bubble size. I started out with drawing the circles below each other, but had issues with the spacing between bubbles. Thus, I decided to put the bubbles on top of one another, with the bottom of each circle aligned together. This ended up being much less space consuming which increased the data ink ratio, and it actually allowed for better comparison between the sizes.</p>

                  <p style="font-size:14px">I spent quite a bit of time trying to make the transition between the fading in and out of the bar charts smoother, but this caused issues when switching between bars to hover over. Since the transition may not be finished if the user switches bars being hovered over too quickly, it caused an issue where all the bars would fade out instead of just ones not being hovered over. Instead, I added a small delay between the fade in and out on the hover so that it would not be quite as quick (avoiding change blindness). </p>

                  <h4 class= "text-center">Conclusion</h4>

                  <p style="font-size:14px"></p>


                  <!-- <p style="font-size:14px">What did you learn about the dataset from your visualizations? This is a difficult but critical part of your discussion. We care utmost about the accuracy and informativeness in the field of information visualization, and you must convince me that your visualizations were informative. Use your visualizations to make conclusions about the data, explain those conclusions, and explain how your visualization supports those conclusions.</p> -->


                </div>  
                <div class="col-md-2"></div> 
            </div>
          </div>
      </div>        
  </div>

</body>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41707651-2', 'auto');
  ga('send', 'pageview');
</script>

<footer>
    <div class="row">          
        <p style="text-align: center; font-size:12px">Monica Meyer &bullet; MSAN 622 Information Visualization &bullet; Spring 2015</p>
    </div>
</footer>

</html>
